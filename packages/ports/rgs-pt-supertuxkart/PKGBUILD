# Maintainer: V0rt3x667 <al-g0l@outlook.com>

pkgname=rgs-pt-supertuxkart
pkgver=1.0
pkgrel=1
pkgdesc='Kart racing game featuring Tux and his friends'
arch=('x86_64')
url='https://supertuxkart.net/'
license=('GPL3')
depends=('openal' 'libvorbis' 'fribidi' 'curl' 'bluez-libs' 'libxrandr' 'glu' 'wayland')
makedepends=('cmake' 'subversion' 'mesa' 'imagemagick' 'setconf' 'mesa-libgl' 'libxkbcommon')
source=("https://downloads.sourceforge.net/supertuxkart/supertuxkart-${pkgver}-src.tar.xz")
sha512sums=('182754610abd09545630fa1f7fda858ba1731bbacb078bc71597e143f9cb2a1cfcedd3038720760d0471a89b79cc3bb1eb292d38fcd53be05aad7cb17c474ca9')

prepare() {
  cd ${srcdir}/supertuxkart-${pkgver}
  
  if [[ -d build ]]; then
    rm -rf build
  fi
  mkdir build
}

build() {
  cd ${srcdir}/supertuxkart-${pkgver}/build

  cmake .. \
    -DCMAKE_BUILD_TYPE=None \
    -DCMAKE_INSTALL_PREFIX=/opt/archrgs/ports/$pkgname \
    -DCMAKE_INSTALL_LIBDIR=lib \
	-DBUILD_RECORDER=0
  make
}

package() {
  cd ${srcdir}/supertuxkart-${pkgver}/build

  make DESTDIR="$pkgdir" install
}